<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraftLand | Quiz</title>
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="shortcut icon" href="./imgs/logo mine.png" type="image/x-icon">
</head>

<body>

    <div id="quiz">
        <div id="containerPerguntas"></div>
        <br>
        <button class="btn btn-outline-secondaryQuiz" id="enviar">Enviar</button>
    </div>

    <div id="resultado"></div>

    <script>
        // Array de perguntas divididas em duas fases
        const perguntasFase1 = [
            "Qual bloco é usado para construir o portal para o Nether?",
            "Qual é o nome do monstro que explode?",
            "Qual é o nome do criador do Minecraft?",
            "Qual é o recurso usado para fazer poções?",
            "Qual é o bloco de mineração mais forte no jogo?"
        ];

        const perguntasFase2 = [
            "Qual é a dimensão do Nether?",
            "Quantos blocos de altura tem o mundo do Minecraft?",
            "Qual é a função do Ender Dragon no jogo?",
            "Quais são os nomes dos mobs hostis que aparecem à noite?",
            "O que você precisa para criar uma poção de força?"
        ];

        // Opções para cada pergunta
        const opcoesFase1 = [
            ["Obsidiana", "Pedra", "Madeira", "Cobblestone"],
            ["Zumbi", "Esqueleto", "Creeper", "Enderman"],
            ["Notch", "Herobrine", "Steve", "Ender Dragon"],
            ["Diamante", "Ouro", "Ferro", "Nether Wart"],
            ["Diamante", "Ouro", "Pedra", "Obsidiana"]
        ];

        const opcoesFase2 = [
            ["3", "4", "5", "6"],
            ["128", "256", "512", "1024"],
            ["Finalizar o jogo", "Criar portais", "Defender o mundo", "Nenhuma"],
            ["Zumbi e Creeper", "Zumbi e Enderman", "Enderman e Creeper", "Esqueleto e Zumbi"],
            ["Poção de água e blaze powder", "Poção de água e Nether Wart", "Poção de força e blaze rod", "Poção de força e Nether Wart"]
        ];

        // Respostas corretas para cada pergunta
        const respostasFase1 = [
            "Obsidiana", "Creeper", "Notch", "Nether Wart", "Obsidiana"
        ];

        const respostasFase2 = [
            "5", "256", "Finalizar o jogo", "Zumbi e Creeper", "Poção de força e blaze rod"
        ];

        const containerQuiz = document.getElementById('quiz');
        const containerResultado = document.getElementById('resultado');
        const botaoEnviar = document.getElementById('enviar');
        const containerPerguntas = document.getElementById('containerPerguntas');

        let pontuacaoFase1 = 0; // Variável para armazenar a pontuação da fase 1 do usuário
        let pontuacaoFase2 = 0; // Variável para armazenar a pontuação da fase 2 do usuário
        let faseAtual = 1; // Variável para rastrear a fase atual do quiz
        let indicePerguntaAtual = 0; // Variável para rastrear o índice da próxima pergunta a ser exibida

        // Função para exibir as próximas perguntas com base na fase atual
        function exibirPerguntas() {
            // Limpa o container de perguntas
            containerPerguntas.innerHTML = '';

            // Seleciona as perguntas e opções com base na fase atual
            const perguntas = faseAtual === 1 ? perguntasFase1 : perguntasFase2;
            const opcoes = faseAtual === 1 ? opcoesFase1 : opcoesFase2;

            // Exibe as próximas perguntas
            for (let i = indicePerguntaAtual; i < indicePerguntaAtual + 5; i++) {
                if (i < perguntas.length) {
                    const pergunta = perguntas[i];
                    const opcoesPergunta = opcoes[i];

                    const divPergunta = document.createElement('div');
                    divPergunta.innerHTML = `
            <h2>${pergunta}</h2>
            ${opcoesPergunta.map((opcao, indiceOpcao) => `
              <input type="radio" name="pergunta${i}" value="${opcao}" id="pergunta${i}_opcao${indiceOpcao}">
              <label for="pergunta${i}_opcao${indiceOpcao}">${opcao}</label><br>
            `).join('')}
            <div id="resposta${i}"></div>
          `;
                    containerPerguntas.appendChild(divPergunta);
                }
            }

            // Atualiza o índice da próxima pergunta
            indicePerguntaAtual += 5;
        }

        // Função para verificar as respostas da fase atual e avançar para a próxima fase ou mostrar o resultado final
        function verificarRespostas() {
            const respostas = faseAtual === 1 ? respostasFase1 : respostasFase2;
            let pontuacao;
            let perguntasFase;

            if (faseAtual === 1) {
                pontuacao = pontuacaoFase1;
                perguntasFase = perguntasFase1;
            } else {
                pontuacao = pontuacaoFase2;
                perguntasFase = perguntasFase2;
            }

            perguntasFase.forEach((pergunta, indice) => {
                const opcaoSelecionada = document.querySelector(`input[name="pergunta${indicePerguntaAtual - 5 + indice}"]:checked`);
                const respostaContainer = document.getElementById(`resposta${indicePerguntaAtual - 5 + indice}`);
                if (opcaoSelecionada && opcaoSelecionada.value === respostas[indice]) {
                    pontuacao++;
                    respostaContainer.innerText = "Correto!";
                    respostaContainer.style.color = "green";
                } else {
                    respostaContainer.innerText = "Incorreto!";
                    respostaContainer.style.color = "red";
                }
            });

            // Mostra as respostas corretas e incorretas por 7 segundos antes de avançar
            setTimeout(() => {
                // Se for a primeira fase, avança para a segunda fase, senão, mostra o resultado final
                if (faseAtual === 1) {
                    pontuacaoFase1 = pontuacao;
                    faseAtual = 2;
                    indicePerguntaAtual = 0;
                    exibirPerguntas();
                } else {
                    pontuacaoFase2 = pontuacao;
                    mostrarResultado();
                }
            }, 7000); // 7 segundos de tempo de exibição
        }

        // Função para mostrar o resultado final
        function mostrarResultado() {
            const pontuacaoTotal = pontuacaoFase1 + pontuacaoFase2;
            window.location = "dashboard.html";
            containerResultado.innerHTML = `
                Pontuação total: ${pontuacaoTotal}<br>
                Pontuação na Fase 1: ${pontuacaoFase1}<br>
                Pontuação na Fase 2: ${pontuacaoFase2}
            `;

            location.assign("dashboard.html#?" + pontuacaoTotal);
            location.assign("dashboard.html#" + pontuacaoFase1);
            location.assign("dashboard.html#" + pontuacaoFase2);
        }

        // Event listener para o botão de enviar
        botaoEnviar.addEventListener('click', () => {
            if (indicePerguntaAtual < perguntasFase1.length && faseAtual === 1) {
                exibirPerguntas(); // Exibe as próximas perguntas da fase 1
            } else if (indicePerguntaAtual < perguntasFase2.length && faseAtual === 2) {
                exibirPerguntas(); // Exibe as próximas perguntas da fase 2
            } else {
                verificarRespostas(); // Verifica as respostas e mostra o resultado final
            }
        });

        // Exibe as primeiras perguntas da fase 1
        exibirPerguntas();


    </script>

</body>

</html>